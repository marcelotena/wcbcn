function SeriesService($http){function getSeries(page){return page?request=pagedAPI:(request=API,page=""),$http.get(request+page).then(function(response){var totalPages=response.headers("X-WP-TotalPages");return processSeriesList(response.data,totalPages)})}function getSerie(id){return $http.get(API+"/"+id).then(function(response){var totalPosts=response.headers("X-WP-Total");return processSerie(response.data,totalPosts)})}function processSerie(item,totalPosts){var processedItem;return processedItem={id:item.id,date:item.date,link:item.link,title:item.title.rendered,spanishTitle:item.acf.titulo_traducido,slug:item.slug,content:item.content.rendered,image:item.featured_media,totalPosts:totalPosts}}function processSeriesList(data,totalPages){return data.map(function(item){var processedItem;return processedItem={id:item.id,date:item.date,link:item.link,title:item.title.rendered,spanishTitle:item.acf.titulo_traducido,slug:item.slug,content:item.content.rendered,image:item.featured_media,totalPages:totalPages}})}function getImageThumbnail(id){return $http.get(API+"/"+id).then(function(response){return response.data.better_featured_image.media_details.sizes.thumbnail.source_url})}var API="wp-json/wp/v2/series",pagedAPI="wp-json/wp/v2/series?page=",request="";return{getSeries:getSeries,getSerie:getSerie,getImageThumbnail:getImageThumbnail}}function OmdbService($http){function getImage(query){var cleanedQuery=query.split(" ").join("+");return $http.get(API+cleanedQuery).then(function(response){return response.data.Poster})}function getYear(query){var cleanedQuery=query.split(" ").join("+");return $http.get(API+cleanedQuery).then(function(response){return response.data.Year})}function getActors(query){var cleanedQuery=query.split(" ").join("+");return $http.get(API+cleanedQuery).then(function(response){return response.data.Actors})}function getRating(query){var cleanedQuery=query.split(" ").join("+");return $http.get(API+cleanedQuery).then(function(response){return response.data.imdbRating})}var API="http://www.omdbapi.com/?t=";return{getImage:getImage,getYear:getYear,getActors:getActors,getRating:getRating}}function MediaService($http){function getMediaItem(id){return $http.get(API+"/"+id).then(function(response){return processMediaItem(response.data)})}function processMediaItem(item){var processedItem;return processedItem={id:item.id,date:item.date,link:item.link,title:item.title.rendered,alt:item.alt_text,spanishTitle:item.acf.titulo_traducido,slug:item.slug,type:item.media_type,sizes:{thumbnail:item.media_details.sizes.thumbnail.source_url,medium:item.media_details.sizes.medium.source_url,mediumLarge:item.media_details.sizes.medium_large.source_url,large:item.media_details.sizes.large.source_url}}}var API="wp-json/wp/v2/media";return{getMediaItem:getMediaItem}}function PagesService($http){function getPage(slug){return $http.get(API+"?slug="+slug).then(function(response){return response.data[0]})}var API="wp-json/wp/v2/pages";return{getPage:getPage}}angular.module("app",["ngSanitize","ui.router","infinite-scroll"]);var home={bindings:{list:"<"},templateUrl:"wp-content/themes/wp_ng_spa/assets/js/components/home/home.component.html",controller:function(SeriesService){var ctrl=this,currentPage=2,pageLimit=5;ctrl.busy=!1,ctrl.activeItem=0,ctrl.loadMorePages=function(){currentPage<=pageLimit&&(ctrl.busy=!0,SeriesService.getSeries(currentPage).then(function(response){currentPage++,pageLimit=response[0].totalPages,ctrl.list=ctrl.list.concat(response),ctrl.busy=!1}))}}};angular.module("app").component("home",home).config(function($stateProvider,$urlRouterProvider,$locationProvider){$locationProvider.html5Mode(!0),$stateProvider.state("home",{url:"/",component:"home",resolve:{list:function(SeriesService){return SeriesService.getSeries()}}}),$urlRouterProvider.otherwise("/")});var detail={bindings:{activeItem:"<",item:"<"},controller:function(){},templateUrl:"wp-content/themes/wp_ng_spa/assets/js/components/home/detail/detail.component.html"};angular.module("app").component("detail",detail);var thumbnail={bindings:{omdbQuery:"<",featuredImageId:"<"},controller:function(OmdbService,MediaService){var ctrl=this;ctrl.image="",ctrl.featuredImageId?MediaService&&MediaService.getMediaItem(ctrl.featuredImageId).then(function(response){ctrl.image=response.sizes.thumbnail}):OmdbService.getImage(ctrl.omdbQuery).then(function(response){ctrl.image=response})},templateUrl:"wp-content/themes/wp_ng_spa/assets/js/components/home/thumbnail/thumbnail.component.html"};angular.module("app").component("thumbnail",thumbnail);var actors={bindings:{omdbQuery:"<"},controller:function(OmdbService){var ctrl=this;ctrl.actors="",OmdbService.getActors(ctrl.omdbQuery).then(function(response){ctrl.actors=response})},templateUrl:"wp-content/themes/wp_ng_spa/assets/js/components/home/actors/actors.component.html"};angular.module("app").component("actors",actors);var rating={bindings:{omdbQuery:"<"},controller:function(OmdbService){function round(value,step){step||(step=1);var inv=1/step;return Math.round(value*inv)/inv}var ctrl=this;ctrl.stars="",OmdbService.getRating(ctrl.omdbQuery).then(function(response){ctrl.stars=response,ctrl.rating={value:response,stars:round(response/10*5,.5)}})},templateUrl:"wp-content/themes/wp_ng_spa/assets/js/components/home/rating/rating.component.html"};angular.module("app").component("rating",rating);var about={bindings:{pageContent:"<"},templateUrl:"wp-content/themes/wp_ng_spa/assets/js/components/about/about.component.html",controller:function(){}};angular.module("app").component("about",about).config(function($stateProvider,$urlRouterProvider,$locationProvider){$locationProvider.html5Mode(!0),$stateProvider.state("about",{url:"/sobre-esta-web/",component:"about",resolve:{pageContent:function(PagesService){return PagesService.getPage("sobre-esta-web")}}}),$urlRouterProvider.otherwise("/")}),angular.module("app").factory("SeriesService",SeriesService),angular.module("app").factory("OmdbService",OmdbService),angular.module("app").factory("MediaService",MediaService),angular.module("app").factory("PagesService",PagesService);
//# sourceMappingURL=script.js.map
