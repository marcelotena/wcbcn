{"version":3,"sources":["series.service.js","omdb.service.js","media.service.js","pages.service.js","app.js","home.js","home.component.js","list-item.component.js","thumbnail.component.js","actors.component.js","rating.component.js","detail.js","detail.component.js","about.js","about.component.js"],"names":["SeriesService","$http","getSeries","page","request","pagedAPI","API","get","then","response","totalPages","headers","processSeriesList","data","getSerie","id","totalPosts","processSerie","getSerieBySlug","slug","item","processedItem","date","link","title","rendered","content","image","map","getImageThumbnail","sizes","thumbnail","OmdbService","getImage","query","cleanedQuery","split","join","getYear","getActors","getRating","MediaService","getMediaItem","processMediaItem","mediaBase","thumbnailImage","medium","mediumImage","mediumLargeImage","large","largeImage","alt","type","mediumLarge","PagesService","getPage","angular","module","home","bindings","list","templateUrl","controller","ctrl","this","currentPage","pageLimit","busy","activeItem","loadMorePages","concat","component","config","$stateProvider","$urlRouterProvider","$locationProvider","html5Mode","state","url","resolve","otherwise","listItem","selectItem","omdbQuery","featuredImageId","actors","rating","round","value","step","inv","Math","stars","detail","serie","$state","params","$transition$","console","log","about","pageContent","factory"],"mappings":"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","file":"script.js","sourcesContent":["function SeriesService($http) {\n\n    var API = 'wp-json/wp/v2/series';\n    var pagedAPI = 'wp-json/wp/v2/series?page=';\n    var request = '';\n\n    function getSeries(page) {\n\n        if (page) {\n            request = pagedAPI;\n        } else {\n            request = API;\n            page = '';\n        }\n\n        return $http\n            .get(request + page)\n            .then(function (response) {\n                var totalPages = response.headers('X-WP-TotalPages');\n                return processSeriesList(response.data, totalPages);\n            });\n\n    }\n\n    function getSerie(id) {\n\n        return $http\n            .get(API + '/' + id)\n            .then(function (response) {\n                var totalPosts = response.headers('X-WP-Total');\n                return processSerie(response.data, totalPosts);\n            });\n\n    }\n\n    function getSerieBySlug(slug) {\n\n        return $http\n            .get(API + '?filter[name]=' + slug)\n            .then(function (response) {\n                var totalPosts = response.headers('X-WP-Total');\n                return processSerie(response.data[0], totalPosts);\n            });\n\n    }\n\n    function processSerie(item, totalPosts) {\n\n        var processedItem;\n\n        processedItem = {\n            id              : item.id,\n            date            : item.date,\n            link            : item.link,\n            title           : item.title.rendered,\n            slug            : item.slug,\n            content         : item.content.rendered,\n            image           : item['featured_media'],\n            totalPosts      : totalPosts\n        };\n\n        return processedItem;\n\n    }\n\n    function processSeriesList(data, totalPages) {\n\n        return data.map(function (item) {\n\n            var processedItem;\n\n            processedItem = {\n                id              : item.id,\n                date            : item.date,\n                link            : item.link,\n                title           : item.title.rendered,\n                slug            : item.slug,\n                content         : item.content.rendered,\n                image           : item['featured_media'],\n                totalPages      : totalPages\n            };\n\n            return processedItem;\n        });\n\n    }\n\n\n\n    // getImageThumbnail when using the plugin Better REST Featured Images\n    function getImageThumbnail(id) {\n\n        return $http\n            .get(API + '/' + id)\n            .then(function (response) {\n                return response.data['better_featured_image']['media_details'].sizes.thumbnail['source_url'];\n            });\n\n    }\n\n    return {\n        getSeries           : getSeries,\n        getSerie            : getSerie,\n        getSerieBySlug      : getSerieBySlug,\n        getImageThumbnail   : getImageThumbnail\n    }\n}\n\n\nangular\n    .module('app')\n    .factory('SeriesService', SeriesService);","function OmdbService($http) {\n\n    var API = 'https://www.omdbapi.com/?t=';\n\n    function getImage(query) {\n\n        var cleanedQuery = query.split(' ').join('+');\n\n        return $http\n            .get(API + cleanedQuery)\n            .then(function (response) {\n                return response.data['Poster'];\n            });\n\n    }\n\n    function getYear(query) {\n\n        var cleanedQuery = query.split(' ').join('+');\n\n        return $http\n            .get(API + cleanedQuery)\n            .then(function (response) {\n                return response.data['Year'];\n            });\n\n    }\n\n    function getActors(query) {\n\n        var cleanedQuery = query.split(' ').join('+');\n\n        return $http\n            .get(API + cleanedQuery)\n            .then(function (response) {\n                return response.data['Actors'];\n            });\n\n    }\n\n    function getRating(query) {\n\n        var cleanedQuery = query.split(' ').join('+');\n\n        return $http\n            .get(API + cleanedQuery)\n            .then(function (response) {\n                return response.data['imdbRating'];\n            });\n\n    }\n\n    return {\n        getImage    : getImage,\n        getYear     : getYear,\n        getActors   : getActors,\n        getRating   : getRating\n    }\n}\n\n\nangular\n    .module('app')\n    .factory('OmdbService', OmdbService);","function MediaService($http) {\n\n    var API = 'wp-json/wp/v2/media';\n\n    function getMediaItem(id) {\n\n        return $http\n            .get(API + '/' + id)\n            .then(function (response) {\n                return processMediaItem(response.data);\n            });\n\n    }\n\n    function processMediaItem(item) {\n\n            var processedItem;\n\n            if (item['media_details'].sizes) {\n                var mediaBase = item['media_details'].sizes;\n\n                if (mediaBase.thumbnail) {\n                    var thumbnailImage = mediaBase.thumbnail['source_url'];\n                }\n\n                if (mediaBase.medium) {\n                    var mediumImage = mediaBase.medium['source_url'];\n                }\n\n                if (mediaBase['medium_large']) {\n                    var mediumLargeImage = mediaBase['medium_large']['source_url'];\n                }\n\n                if (mediaBase.large) {\n                    var largeImage = mediaBase.large['source_url'];\n                }\n            }\n\n            processedItem = {\n                id              : item.id,\n                date            : item.date,\n                link            : item.link,\n                title           : item.title.rendered,\n                alt             : item['alt_text'],\n                slug            : item.slug,\n                type            : item['media_type'],\n                sizes           : {\n                    thumbnail   : thumbnailImage,\n                    medium      : mediumImage,\n                    mediumLarge : mediumLargeImage,\n                    large       : largeImage\n                }\n            };\n\n            return processedItem;\n\n    }\n\n\n\n    return {\n        getMediaItem: getMediaItem\n    }\n}\n\n\nangular\n    .module('app')\n    .factory('MediaService', MediaService);","function PagesService($http) {\n\n    var API = 'wp-json/wp/v2/pages';\n\n\n    function getPage(slug) {\n\n        return $http\n            .get(API + '?slug=' + slug)\n            .then(function (response) {\n                return response.data[0];\n            });\n\n    }\n\n\n    return {\n        getPage : getPage\n    }\n}\n\n\nangular\n    .module('app')\n    .factory('PagesService', PagesService);","angular\n    .module('app', [\n        'home',\n        'detail',\n        'about'\n    ]);","angular\n    .module('home', [\n        'ngSanitize',\n        'ui.router',\n        'infinite-scroll'\n    ]);","var home = {\n    bindings: {\n        list: '<'\n    },\n    templateUrl: 'wp-content/themes/wcbcn/assets/js/components/home/home.component.html',\n    controller: function(SeriesService) {\n        var ctrl = this;\n        var currentPage = 2;\n        var pageLimit = 5;\n        ctrl.busy = false;\n        ctrl.activeItem = 0;\n\n        ctrl.loadMorePages = function () {\n\n            if (currentPage <= pageLimit) {\n                ctrl.busy = true;\n\n                SeriesService\n                    .getSeries(currentPage)\n                    .then(function(response) {\n                        currentPage++;\n                        pageLimit = response[0].totalPages;\n                        ctrl.list = ctrl.list.concat(response);\n                        ctrl.busy = false;\n                    });\n\n            }\n\n        };\n\n    }\n};\n\nangular\n    .module('home')\n    .component('home', home)\n    .config(function ($stateProvider, $urlRouterProvider, $locationProvider) {\n\n        $locationProvider.html5Mode(true);\n\n        $stateProvider\n            .state('home', {\n                url: '/',\n                component: 'home',\n                resolve: {\n                    list: function(SeriesService) {\n                        return SeriesService.getSeries();\n                    }\n                }\n            });\n\n        $urlRouterProvider.otherwise('/');\n    });","var listItem = {\n    bindings: {\n        item: '<',\n        activeItem: '='\n    },\n    controller: function () {\n\n        var ctrl = this;\n\n        ctrl.selectItem = function (item) {\n\n            if (!ctrl.activeItem || ctrl.activeItem !== item) {\n                ctrl.activeItem = item;\n            } else {\n                ctrl.activeItem = 0;\n            }\n\n        };\n\n\n    },\n    templateUrl: 'wp-content/themes/wcbcn/assets/js/components/home/list-item/list-item.component.html'\n};\n\nangular\n    .module('home')\n    .component('listItem', listItem);","var thumbnail = {\n    bindings: {\n        omdbQuery: '<',\n        featuredImageId: '<'\n    },\n    controller: function (OmdbService, MediaService) {\n\n        var ctrl = this;\n        ctrl.image = '';\n\n        if (ctrl.featuredImageId) {\n\n            if(MediaService) {\n                MediaService\n                    .getMediaItem(ctrl.featuredImageId)\n                    .then(function(response) {\n                        ctrl.image = response['sizes']['thumbnail'];\n                    });\n            }\n\n\n        } else {\n\n            OmdbService\n                .getImage(ctrl.omdbQuery)\n                .then(function(response) {\n                    ctrl.image = response;\n                });\n\n        }\n\n\n    },\n    templateUrl: 'wp-content/themes/wcbcn/assets/js/components/home/list-item/thumbnail/thumbnail.component.html'\n};\n\n\nangular\n    .module('home')\n    .component('thumbnail', thumbnail);","var actors = {\n    bindings: {\n        omdbQuery: '<'\n    },\n    controller: function (OmdbService) {\n\n        var ctrl = this;\n        ctrl.actors = '';\n\n        OmdbService\n            .getActors(ctrl.omdbQuery)\n            .then(function(response) {\n                ctrl.actors = response;\n            });\n\n    },\n    templateUrl: 'wp-content/themes/wcbcn/assets/js/components/home/list-item/actors/actors.component.html'\n};\n\nangular\n    .module('home')\n    .component('actors', actors);","var rating = {\n    bindings: {\n        omdbQuery: '<'\n    },\n    controller: function (OmdbService) {\n\n        var ctrl = this;\n        ctrl.stars = '';\n\n        OmdbService\n            .getRating(ctrl.omdbQuery)\n            .then(function(response) {\n                ctrl.stars = response;\n                ctrl.rating = {\n                    value: response,\n                    stars: round(response/10*5, 0.5)\n                }\n            });\n\n        function round(value, step) {\n            step || (step = 1.0);\n            var inv = 1.0 / step;\n            return Math.round(value * inv) / inv;\n        }\n\n    },\n    templateUrl: 'wp-content/themes/wcbcn/assets/js/components/home/list-item/rating/rating.component.html'\n};\n\nangular\n    .module('home')\n    .component('rating', rating);","angular\n    .module('detail', [\n        'ngSanitize',\n        'ui.router'\n    ]);","var detail = {\n    bindings: {\n        serie: '<'\n    },\n    controller: function ($state) {\n\n    },\n    templateUrl: 'wp-content/themes/wcbcn/assets/js/components/detail/detail.component.html'\n};\n\nangular\n    .module('detail')\n    .component('detail', detail)\n    .config(function ($stateProvider, $urlRouterProvider, $locationProvider) {\n\n        $locationProvider.html5Mode(true);\n\n        $stateProvider\n            .state('detail', {\n                url: '/series/:slug',\n                component: 'detail',\n                params: {\n                    slug: null\n                },\n                resolve: {\n                    serie: function (SeriesService, $transition$) {\n                        var params = $transition$.params().slug;\n                        console.log(params);\n                        return SeriesService.getSerieBySlug(params);\n                    }\n                }\n            });\n\n        $urlRouterProvider.otherwise('/');\n    });","angular\n    .module('about', [\n        'ngSanitize'\n    ]);","var about = {\n    bindings: {\n        pageContent: '<'\n    },\n    templateUrl: 'wp-content/themes/wcbcn/assets/js/components/about/about.component.html',\n    controller: function() {\n\n    }\n};\n\nangular\n    .module('about')\n    .component('about', about)\n    .config(function ($stateProvider, $urlRouterProvider, $locationProvider) {\n\n        $locationProvider.html5Mode(true);\n\n        $stateProvider\n            .state('about', {\n                url: '/sobre-esta-web/',\n                component: 'about',\n                resolve: {\n                    pageContent: function(PagesService) {\n                        return PagesService.getPage('sobre-esta-web');\n                    }\n                }\n            });\n\n        $urlRouterProvider.otherwise('/');\n    });"]}